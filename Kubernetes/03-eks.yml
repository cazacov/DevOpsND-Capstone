Parameters:
    EKSClusterName:
        Description: Cluster name
        Type: String
        Default: udacity-devops-eks

    EnvironmentName:
        Description: An environment name that will be prefixed to resource names
        Type: String
        Default: Udacity-DevOps-Capstone
                
  
Resources:
    EKSCluster:
        Type: AWS::EKS::Cluster
        Properties:
          Name: !Ref EKSClusterName
          RoleArn: 
            Fn::ImportValue: !Sub "${EnvironmentName}-EKSIAMRoleArn"
          ResourcesVpcConfig:
            SecurityGroupIds:
            - Fn::ImportValue: !Sub "${EnvironmentName}-SecurityGroup"
            SubnetIds:
            - Fn::ImportValue: !Sub "${EnvironmentName}-PUB1-SN"
            - Fn::ImportValue: !Sub "${EnvironmentName}-PUB2-SN"
            - Fn::ImportValue: !Sub "${EnvironmentName}-PRI1-SN"
            - Fn::ImportValue: !Sub "${EnvironmentName}-PRI2-SN"